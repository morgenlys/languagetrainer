<!doctype html>
<html lang="de" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Französisch – Vokabeltrainer</title>
  <meta name="description" content="Französisch-Vokabeltrainer mit Cookies, TTS, Fehlertoleranz & Spaced Repetition. Läuft auf GitHub Pages.">
  <link rel="stylesheet" href="styles/main.css"/>
</head>
<body>
  <!-- Icons -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <symbol id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></symbol>
    <symbol id="icon-sound" viewBox="0 0 24 24"><path d="M3 10v4h4l5 5V5L7 10H3zM16 7.82v8.36c1.79-.77 3-2.54 3-4.18s-1.21-3.41-3-4.18z"/></symbol>
    <symbol id="icon-upload" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m7-9l5 5h-3v4h-4v-4H7l5-5z"/></symbol>
    <symbol id="icon-settings" viewBox="0 0 24 24"><path d="M12 8a4 4 0 100 8 4 4 0 000-8zM4 12a8 8 0 0116 0"/></symbol>
    <symbol id="icon-close" viewBox="0 0 24 24"><path d="M6 6l12 12M18 6L6 18"/></symbol>
  </svg>

  <!-- Header (transparent, mit Frame für Ausrichtung) -->
  <header class="app-header">
    <div class="frame">
      <div class="brand">
        <span class="logo">Französisch</span>
        <div class="status">
          <span><strong id="stat-total">0</strong> gesamt</span>
          <span><strong id="stat-new">0</strong> neu</span>
          <span><strong id="stat-due">0</strong> fällig</span>
          <span><strong id="stat-streak">0</strong> Streak</span>
        </div>
      </div>
      <div class="header-actions">
        <button id="btn-options" class="icon-btn" title="Optionen">
          <svg><use href="#icon-settings"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Stage ohne Scroll, Karte mittig -->
  <main class="stage">
    <div class="gutter"></div>
    <section class="card big" id="card">
      <div class="card-inner" id="mode-container">
        <div class="placeholder">
          <p>Importiere deine CSV/JSON in <em>Optionen</em> oder nutze die Beispieldaten. Dann „Starten“.</p>
        </div>
      </div>
      <div class="action-bar" id="action-bar">
        <div class="message" id="action-msg"></div>
        <div class="actions">
          <button id="primary-action" class="btn stable" disabled>Überprüfen</button>
        </div>
      </div>
    </section>
    <div class="gutter"></div>
  </main>

  <!-- Footer (transparent, ausgerichtet wie Karte) -->
  <footer class="app-footer">
    <div class="frame">
      <div class="theme-toggle">
        <label class="switch" title="Hell/Dunkel">
          <input id="theme-toggle" type="checkbox">
          <span class="slider"></span>
        </label>
        <span id="theme-label">Hell</span>
      </div>
    </div>
  </footer>

  <!-- Optionen-Modal -->
  <div class="modal" id="modal-options" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card">
      <div class="modal-head">
        <h2>Optionen</h2>
        <button class="icon-btn" data-close><svg><use href="#icon-close"/></svg></button>
      </div>
      <div class="modal-body">
        <section class="opt-section">
          <h3>Session</h3>
          <label><input type="checkbox" id="chk-only-due"> nur fällige prüfen</label>
          <label><input type="checkbox" id="chk-include-words" checked> Wörter einbeziehen</label>
          <label><input type="checkbox" id="chk-include-sentences" checked> Sätze einbeziehen</label>
          <div class="opt-row">
            <button id="btn-new-session" class="btn">Starten</button>
            <button id="btn-next" class="btn ghost">Nächste</button>
            <button id="btn-reset" class="btn ghost danger">Fortschritt zurücksetzen</button>
          </div>
        </section>

        <section class="opt-section">
          <h3>Stimme (TTS)</h3>
          <div class="grid2">
            <label>FR-Stimme
              <select id="sel-voice"></select>
            </label>
            <label>Rate
              <input id="inp-rate" type="range" min="0.8" max="1.3" step="0.05" value="1">
            </label>
            <label>Pitch
              <input id="inp-pitch" type="range" min="0.9" max="1.2" step="0.05" value="1">
            </label>
          </div>
          <div class="opt-row">
            <button id="btn-tts-test" class="btn"><svg><use href="#icon-sound"/></svg> Test</button>
          </div>
          <small class="muted">Falls keine französische Stimme vorhanden ist, erscheint ein Hinweis.</small>
        </section>

        <section class="opt-section">
          <h3>Daten</h3>
          <div class="opt-row">
            <button id="btn-load-sample" class="btn">Beispieldaten laden</button>
            <button id="btn-import" class="btn ghost"><svg><use href="#icon-upload"/></svg> Datei laden</button>
            <input id="file-input" type="file" accept=".json,.csv" hidden>
            <a class="link" href="data/sample.csv" target="_blank">CSV Beispiel</a>
            <a class="link" href="data/sample.json" target="_blank">JSON Beispiel</a>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Voice-Hinweis Modal -->
  <div class="modal" id="modal-voice" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card">
      <div class="modal-head">
        <h2>Französische Stimme installieren</h2>
        <button class="icon-btn" data-close><svg><use href="#icon-close"/></svg></button>
      </div>
      <div class="modal-body">
        <p>Dein Browser meldet keine französische Stimme. Bitte füge eine FR-Stimme hinzu:</p>
        <ul>
          <li><strong>iOS/iPadOS:</strong> Einstellungen → Bedienungshilfen → Gesprochene Inhalte → Stimmen → Französisch laden.</li>
          <li><strong>Android:</strong> Einstellungen → System → Sprachen & Eingabe → Text-in-Sprache → Stimme → Französisch herunterladen.</li>
          <li><strong>Windows:</strong> Einstellungen → Zeit & Sprache → Sprache → Sprachpakete → Französisch (Stimme).</li>
          <li><strong>macOS:</strong> Systemeinstellungen → Bedienungshilfen → Gesprochene Inhalte → Systemstimme → Anpassen… → Französisch.</li>
        </ul>
        <p>Danach Seite neu laden.</p>
      </div>
    </div>
  </div>

  <!-- Sound FX (.ogg, optional) -->
  <audio id="fx-ok" src="assets/correct.ogg" preload="auto"></audio>
  <audio id="fx-bad" src="assets/wrong.ogg" preload="auto"></audio>

  <script type="module" src="js/app.js"></script>
</body>
</html>
