/* ===================== FESTE RGB-FARBEN NACH VORGABE ===================== */
:root{
  --white: rgb(255,255,255);
  --lightgray: rgb(240,240,240);
  --darkgray: rgb(42,42,42);
  --darkdark: rgb(28,28,28);
  --black: rgb(0,0,0);

  /* Light Theme */
  --bg: var(--lightgray);       /* Seitenhintergrund */
  --card: var(--white);         /* Karte */
  --chrome: var(--darkdark);    /* Header/Footer-Text/Icons */
  --prompt: var(--black);       /* Zu übersetzender Text */
  --barbg: var(--lightgray);    /* unterer Streifen */

  --btn: var(--darkgray);       /* Überprüfen */
  --btn-hover: var(--black);
  --btn-text: var(--white);

  --chip-bg: var(--lightgray);  /* MC/Match/Satzbau-Kacheln */
  --chip-text: var(--black);
  --chip-border: var(--lightgray);
  --chip-hover: rgb(232,232,232);
  --chip-outline: var(--darkdark); /* Auswahl-Rahmen hell */

  --border: var(--lightgray);
  --shadow: 0 16px 40px rgba(0,0,0,.15);
  --radius: 18px;

  --center-max: 880px;
  --action-h: 92px;

  --font-family: Georgia, "Times New Roman", serif;
  --fs-base: 14px;   /* größer als zuvor */
}
html[data-theme="dark"]{
  --bg: var(--darkdark);
  --card: var(--darkgray);
  --chrome: var(--lightgray);
  --prompt: var(--white);
  --barbg: var(--darkdark);

  --btn: var(--lightgray);
  --btn-hover: var(--white);
  --btn-text: var(--black);

  --chip-bg: var(--darkdark);
  --chip-text: var(--white);
  --chip-border: var(--darkdark);
  --chip-hover: rgb(22,22,22);
  --chip-outline: var(--white); /* Auswahl-Rahmen dunkel */

  --border: var(--darkgray);
  --shadow: 0 14px 36px rgba(0,0,0,.55);
}

/* ===================== BASE ===================== */
*{box-sizing:border-box}
html,body{height:100%; margin:0}
body{
  min-height:100dvh;
  background:var(--bg);
  color:var(--chrome);
  font-family: var(--font-family);
  font-size: var(--fs-base);
  overflow:hidden; /* kein Scrollen */
}

/* ===================== HEADER/FOOTER (transparent, ausgerichtet) ===================== */
.app-header,.app-footer{
  height:56px; display:flex; align-items:center; justify-content:center;
  background: transparent; border: none;
}
.frame{ width:min(var(--center-max), 92vw); display:flex; align-items:center; justify-content:space-between; }
.brand{display:flex; align-items:center; gap:18px}
.logo{font-weight:700; color:var(--chrome)}
.status{display:flex; gap:16px}
.header-actions{display:flex; gap:10px}
.icon-btn{
  background: transparent; color:var(--chrome);
  border:1px solid var(--border); border-radius:10px; width:38px;height:38px;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
}
.icon-btn:hover{ background: rgba(0,0,0,.06) }
html[data-theme="dark"] .icon-btn:hover{ background: rgba(255,255,255,.08) }

/* Footer Inhalt */
.footer-row{align-items:center}
.report-link{ color:var(--chrome); text-decoration:none; border-bottom:1px dotted var(--chrome); }
.report-link:hover{ border-bottom-style:solid }

/* ===================== STAGE ===================== */
.stage{
  position:fixed; top:56px; bottom:56px; left:0; right:0;
  display:grid; grid-template-columns: 1fr minmax(340px, var(--center-max)) 1fr; align-items:center;
  padding: 8px clamp(6px, 2vw, 20px);
}
.gutter{height:100%}

/* ===================== KARTE ===================== */
.card.big{
  background:var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display:flex; flex-direction:column; height:100%;
}
.card-inner{
  position:relative; flex:1;
  /* mehr Luft oben, damit Emoji/Prompt tiefer sitzt wie im Prototyp */
  padding: 34px clamp(22px, 3vw, 34px) 18px;
  display:flex; flex-direction:column; align-items:center; gap:18px; overflow:hidden;
}

/* Prompt / Emoji: EXAKTE Typo & Positionierung */
.emoji-hint{
  font-size: 42px;
  line-height:1;
  margin-top: 4px;
}
.prompt{
  color: var(--prompt);
  font-weight:700;
  text-align:center;
  line-height:1.25;
  margin-top: 6px;        /* Emoji -> Prompt Abstand */
  margin-bottom: 8px;
  /* Größe (36/24/18) kommt dynamisch per JS */
}

/* ===================== BUTTON ===================== */
.btn{
  background:var(--btn); color:var(--btn-text);
  border:none; border-radius:12px; padding:12px 18px;
  font-weight:700; cursor:pointer; box-shadow: var(--shadow);
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  transition: background-color .15s ease;
}
.btn:hover{ background:var(--btn-hover) }
.btn.stable{ width:190px }
.btn[disabled]{ opacity:.6; cursor:not-allowed }

/* ===================== ACTION BAR (unterer Streifen exakt) ===================== */
.action-bar{
  height:var(--action-h);
  background: var(--barbg);
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 18px;
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
}
.message{font-size: var(--fs-base)}

/* ===================== INPUT ===================== */
.input-wrap{display:flex; gap:10px; align-items:center; justify-content:center; width:100%}
.input-wrap input{
  width:min(520px, 100%);
  padding:12px 14px; border-radius:12px; border:1px solid var(--border);
  background:var(--white); color:var(--black); font-family: var(--font-family);
  font-size: var(--fs-base);
}
html[data-theme="dark"] .input-wrap input{ background: var(--darkdark); color: var(--white); border-color: var(--darkgray) }

/* ===================== MULTIPLE CHOICE: exakt wie Prototyp ===================== */
.mc-wrap{display:flex; flex-direction:column; align-items:center; gap:10px}
.mc-grid{
  display:grid; grid-template-columns:repeat(2,1fr); gap:16px;
  width:min(560px, 100%); margin-top: 6px;
}
.choice{
  background: var(--chip-bg);
  color: var(--chip-text);
  border: 1px solid var(--chip-border);
  border-radius: 12px;
  padding: 16px 18px;
  text-align:center;
  cursor:pointer;
  transition: background-color .15s ease;
}
.choice:hover{ background: var(--chip-hover) }
.choice.selected{ outline:2px solid var(--chip-outline); }

/* ===================== MATCHING (beidseitig startbar, gleiche Optik) ===================== */
.kv{
  display:grid; grid-template-columns:1fr 1fr; gap:16px;
  width:min(720px,100%); margin:0 auto; align-items:start;
}
.kv .col{
  background: var(--card);
  border-radius:12px; padding:12px;
  box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
}
.kv .item{
  background: var(--chip-bg); color: var(--chip-text);
  border: 1px solid var(--chip-border);
  border-radius:10px; padding:12px 14px; margin:6px 0; cursor:pointer;
}
.kv .item:hover{ background: var(--chip-hover) }
.kv .item.selected{ outline:2px solid var(--chip-outline) }
.kv .item.matched{ opacity:.55 }

/* ===================== SPEECH BUTTON ===================== */
.audio-btn{
  background: transparent; color: var(--chrome);
  border:1px solid var(--border); border-radius:10px; padding:8px; cursor:pointer;
}
.audio-btn:hover{ background: rgba(0,0,0,.06) }
html[data-theme="dark"] .audio-btn:hover{ background: rgba(255,255,255,.08) }
.audio-btn svg{width:18px;height:18px; fill:currentColor}

/* ===================== SATZBAU ===================== */
.sentence-builder{display:flex; flex-direction:column; gap:14px; align-items:center}
.sentence-target{
  min-height:64px; border:2px dashed var(--chip-border); border-radius:12px; padding:12px;
  display:flex; gap:8px; flex-wrap:wrap; background:transparent; width:min(720px,100%);
}
.pool{
  min-height:68px; background: var(--card); border-radius:12px; padding:12px;
  display:flex; gap:8px; flex-wrap:wrap; width:min(720px,100%);
  box-shadow: 0 1px 0 rgba(0,0,0,.04) inset;
}
.tile{
  background: var(--chip-bg); color: var(--chip-text);
  border:1px solid var(--chip-border);
  border-radius:10px; padding:10px 12px; cursor:pointer; user-select:none;
}
.fly-clone{
  position:fixed; z-index:999; pointer-events:none; border-radius:10px; padding:10px 12px;
  background: var(--chip-bg); color: var(--chip-text); border:1px solid var(--chip-border);
}
.ghost-slot{width:0;height:0; display:inline-block;}

/* ===================== MODAL ===================== */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:20}
.modal[aria-hidden="false"]{display:flex}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35)}
.modal-card{
  position:relative; width:min(880px, 92vw); max-height:85vh; overflow:auto;
  background:var(--card); border-radius:16px; box-shadow: var(--shadow); color:var(--chrome);
}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border)}
.modal-body{padding:14px; display:flex; flex-direction:column; gap:18px}
.opt-section{display:flex; flex-direction:column; gap:10px}
.opt-row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}

/* ===================== THEME SWITCH (genau wie gewünscht) ===================== */
.theme-toggle{display:flex; align-items:center; gap:10px; color:var(--chrome)}
.switch{position:relative; display:inline-block; width:48px; height:28px}
.switch input{opacity:0;width:0;height:0}
.slider{
  position:absolute; inset:0; background: var(--white); border:1px solid var(--border);
  border-radius:999px; transition:.2s;
}
.slider:before{
  content:""; position:absolute; height:22px; width:22px; left:3px; top:3px;
  background: var(--darkgray); border-radius:50%; transition:.2s;
}
.switch input:checked + .slider{ background: var(--black); border-color: var(--black) }
.switch input:checked + .slider:before{ transform: translateX(20px); background: var(--lightgray) }
.toggle-caption{font-weight:700}

/* ===================== RESPONSIVE ===================== */
@media (max-width: 860px){
  .stage{grid-template-columns: 8px 1fr 8px}
  .mc-grid{grid-template-columns:1fr}
  .kv{grid-template-columns:1fr}
}
