/* THEME TOKENS */
:root{
  --bg: #f6f7fb;
  --bg-soft:#ffffff;
  --ink:#0c1020;
  --muted:#5c637a;
  --card:#ffffff;
  --border:#e3e6ef;
  --accent:#365cff;
  --accent-2:#2bb673;
  --danger:#e04444;
  --ok:#22a06b;
  --shadow: 0 10px 28px rgba(0,0,0,.08);
  --radius: 18px;

  --bar-bg:#eef1f8;
  --choice-bg:#f3f6ff;
  --tile-bg:#eef2ff;

  --action-height: 88px;
  --btn-stable-width: 180px;
}
html[data-theme="dark"]{
  --bg:#0f1220;
  --bg-soft:#141833;
  --ink:#eef1ff;
  --muted:#b4bbf0;
  --card:#1b1f3a;
  --border:#2a2f57;
  --accent:#6c8cff;
  --accent-2:#35d49a;
  --danger:#ff6b6b;
  --ok:#35d49a;
  --shadow: 0 8px 24px rgba(0,0,0,.35);

  --bar-bg:#0f1430;
  --choice-bg:#1d2246;
  --tile-bg:#20264a;
}

/* BASE LAYOUT – fill screen, no scroll */
*{box-sizing:border-box}
html,body{height:100%; margin:0}
body{
  min-height:100dvh;
  background:var(--bg);
  color:var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto, Arial;
  overflow:hidden; /* kein Seiten-Scrollen */
}

/* HEADER/FOOTER FIX */
.app-header,.app-footer{
  height:56px;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px; background:var(--bg-soft);
  border-bottom:1px solid var(--border);
}
.app-footer{ border-top:1px solid var(--border); border-bottom:none; position:fixed; bottom:0; left:0; right:0; z-index:10}

/* STATUS */
.brand{display:flex; align-items:center; gap:16px}
.logo{font-weight:800}
.status{display:flex; gap:12px; color:var(--muted); font-size:13px}
.status strong{color:var(--ink)}

/* STAGE: header (56) + footer (56) */
.stage{
  position:fixed; top:56px; bottom:56px; left:0; right:0;
  display:grid; grid-template-columns: 1fr minmax(280px, 840px) 1fr; align-items:center;
  background:linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.02));
  padding: 10px clamp(6px, 2vw, 24px);
}

/* GUTTERS left/right for „karte“ Look */
.gutter{height:100%}

/* CARD */
.card.big{
  background:var(--card); border:1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); display:flex; flex-direction:column;
  height:100%; /* füllt Mitte */
}
.card-inner{
  position:relative; flex:1; padding: 18px clamp(14px, 3vw, 28px);
  display:flex; flex-direction:column; gap:16px; justify-content:flex-start;
  align-items:stretch; overflow:hidden;
}

/* PROMPT / EMOJI */
.prompt{font-size: clamp(18px, 2.4vw, 26px); font-weight:800}
.emoji-hint{font-size: 42px; text-align:center; line-height:1; opacity:.9}

/* MC GRID */
.mc-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-top:4px; flex:1}
.choice{
  background:var(--choice-bg); border:1px solid var(--border); border-radius:14px;
  padding:12px; cursor:pointer; color:var(--ink);
  transition:transform .12s ease, border-color .2s ease, background-color .2s ease;
}
.choice:hover{transform:translateY(-1px)}
.choice.correct{border-color:var(--ok)}
.choice.wrong{border-color:var(--danger)}

/* INPUT */
.input-wrap{display:flex; gap:10px; align-items:center}
.input-wrap input{
  flex:1; padding:12px 14px; border-radius:12px; border:1px solid var(--border);
  background:var(--bg-soft); color:var(--ink); font-size:16px
}

/* MATCHING (5er) */
.kv{display:grid; grid-template-columns:1fr 1fr; gap:10px; flex:1; min-height:220px}
.kv .col{background:var(--bg-soft); border:1px dashed var(--border); border-radius:12px; padding:12px; overflow:auto}
.kv .item{background:var(--tile-bg); color:var(--ink); padding:8px 10px; border-radius:10px; margin:6px 0; cursor:pointer}
.kv .item.matched{opacity:.5}

/* SPEECH / AUDIO BUTTON */
.audio-btn{background:transparent; border:1px solid var(--border); border-radius:10px; padding:8px; cursor:pointer; align-self:flex-start}
.audio-btn svg{width:18px;height:18px; fill:currentColor}

/* SENTENCE BUILDER */
.sentence-builder{display:flex; flex-direction:column; gap:10px; flex:1}
.sentence-target{
  min-height:64px; border:1px dashed var(--border); border-radius:12px; padding:12px;
  display:flex; gap:8px; flex-wrap:wrap; background:var(--bg-soft)
}
.pool{
  min-height:68px; background:var(--bg-soft); border:1px dashed var(--border); padding:12px; border-radius:12px;
  display:flex; gap:8px; flex-wrap:wrap; align-content:flex-start
}
.tile{
  background:var(--tile-bg); color:var(--ink); padding:10px 12px; border-radius:10px; cursor:pointer; user-select:none;
  transition: transform .15s ease;
}
.tile:hover{transform:translateY(-1px)}
.fly-clone{position:fixed; z-index:999; pointer-events:none; border-radius:10px; padding:10px 12px; background:var(--tile-bg); color:var(--ink); border:1px solid var(--border);}

/* FOOTER ACTION BAR – fixed height */
.action-bar{
  height:var(--action-height); border-top:1px solid var(--border);
  background:var(--bar-bg); display:flex; align-items:center; justify-content:space-between;
  padding: 10px 16px; gap:10px;
}
.action-bar.ok{background:linear-gradient(0deg, rgba(34,160,107,.12), var(--bar-bg))}
.action-bar.bad{background:linear-gradient(0deg, rgba(224,68,68,.12), var(--bar-bg))}
.message{font-size:14px; color:var(--muted)}
.message strong{color:var(--ink)}
.actions{display:flex; align-items:center; gap:10px}
.btn{
  background:var(--accent); color:#fff; border:none; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; box-shadow: var(--shadow);
  display:inline-flex; align-items:center; gap:8px; transition: transform .05s ease;
}
.btn:active{transform:translateY(1px)}
.btn.ghost{background:transparent; border:1px solid var(--border); color:var(--ink)}
.btn.ghost.danger{border-color:var(--danger); color:var(--danger)}
.btn.primary{background:#2d3cff}
.btn.stable{width:var(--btn-stable-width)}
.btn.ok{background:#1c8a60}
.btn.bad{background:#b33a3a}

/* SIMPLE CONTROLS */
.link{color:#3462ff; text-decoration:none}
.link:hover{text-decoration:underline}
.icon-btn{background:transparent;border:1px solid var(--border);border-radius:10px; width:36px;height:36px; display:flex;align-items:center;justify-content:center; cursor:pointer}

/* MODAL */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:20}
.modal[aria-hidden="false"]{display:flex}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35)}
.modal-card{
  position:relative; width:min(880px, 92vw); max-height:85vh; overflow:auto;
  background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border)}
.modal-body{padding:14px; display:flex; flex-direction:column; gap:18px}
.opt-section{display:flex; flex-direction:column; gap:10px}
.opt-row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}

/* THEME SWITCH */
.switch{position:relative; display:inline-block; width:48px; height:28px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute; cursor:pointer; inset:0; background:#ccd2f0; border-radius:999px; transition:.2s}
.slider:before{content:""; position:absolute; height:22px; width:22px; left:3px; top:3px; background:#fff; border-radius:50%; transition:.2s}
.switch input:checked + .slider{background:#1e263f}
.switch input:checked + .slider:before{transform:translateX(20px)}

/* PLACEHOLDER */
.placeholder{opacity:.8; text-align:center; margin:auto; color:var(--muted)}

/* RESPONSIVE */
@media (max-width: 860px){
  .stage{grid-template-columns: 8px 1fr 8px}
  .mc-grid{grid-template-columns:1fr}
  .kv{grid-template-columns:1fr}
  .grid2{grid-template-columns:1fr}
  .prompt{font-size:20px}
}

/* iOS safe area for footer */
@supports(padding:max(0px)){
  .app-footer{padding-bottom: max(8px, env(safe-area-inset-bottom))}
}
