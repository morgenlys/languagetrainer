/* ========= THEME TOKENS ========= */
:root{
  /* Light (Default) */
  --bg: #f7f8fb;
  --bg-soft:#ffffff;
  --ink:#0e1020;
  --muted:#5e6787;
  --card:#ffffff;
  --border:#e3e6f0;
  --accent:#3b65ff;
  --accent-2:#00d1b2;
  --danger:#e5484d;
  --ok:#14b87a;
  --shadow: 0 6px 24px rgba(3,10,40,.08);
  --radius: 18px;
}
.theme-dark{
  --bg: #0f1220;
  --bg-soft:#151832;
  --ink:#eef1ff;
  --muted:#b4bbf0;
  --card:#1b1f3a;
  --border:#2a2f57;
  --accent:#6c8cff;
  --accent-2:#7fffd4;
  --danger:#ff6b6b;
  --ok:#35d49a;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

/* ========= RESET ========= */
*{box-sizing:border-box}
html,body{height:100%}
html,body{margin:0}
body{
  background: var(--bg);
  color: var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans";
  overflow:hidden; /* keine Scrolls */
}

/* ========= LAYOUT: HEADER / MAIN / FOOTER ========= */
.app-header,.app-footer{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 20px;
  background: var(--bg-soft);
  border-bottom:1px solid var(--border);
}
.app-footer{ border-top:1px solid var(--border); border-bottom:none; }

.brand{display:flex; gap:8px; align-items:baseline}
.brand .logo{font-weight:800; letter-spacing:.3px}
.brand .muted{color:var(--muted)}
.brand .sep{color:var(--muted)}

.header-actions .btn{white-space:nowrap}

.header-status{
  display:flex; align-items:center; gap:14px; min-width: 420px;
}
.header-status .stat{display:flex; flex-direction:column; align-items:center; min-width:62px}
.header-status .stat span{font-weight:800; font-size:18px}
.header-status .stat small{color:var(--muted)}
.header-status .bar{
  width:160px; height:8px; background:#e9ecf6; border-radius:999px; overflow:hidden; border:1px solid var(--border);
}
.theme-dark .header-status .bar{ background:#222845; }
.header-status .bar #progress{
  height:100%; width:0%; background:linear-gradient(90deg,var(--accent), var(--accent-2)); transition:width .4s ease;
}

.shell{
  /* 25% | 50% | 25% */
  height: calc(100vh - 56px - 56px); /* header + footer ~56px */
  display:grid; grid-template-columns: 1fr minmax(320px, 50vw) 1fr; gap: 18px;
  align-items:center; justify-items:center;
  padding: 12px 16px;
}

/* ========= CARD ========= */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.card.big{
  width:100%;
  max-width: 920px;
  height: calc(100% - 4px); /* Luft */
  display:flex; flex-direction:column;
  padding:16px;
}
.card.soft{ padding:16px; }

.q-header{min-height: 92px; display:flex; align-items:center; justify-content:center; text-align:center; padding:8px}
.q-body{
  flex:1; display:flex; align-items:center; justify-content:center;
  padding:8px; overflow:hidden;
}
.q-footer{
  min-height:64px; display:flex; align-items:center; justify-content:center;
  gap:10px; padding:8px; border-top:1px dashed var(--border);
}

.placeholder{opacity:.85}
.placeholder .big{width:44px;height:44px; display:block; margin:0 auto 8px}
.mt{margin-top:8px}

/* ========= CONTROLS ========= */
.btn{
  background:var(--accent); color:#fff; border:none; padding:10px 14px;
  border-radius:12px; cursor:pointer; font-weight:700; box-shadow: var(--shadow);
  display:inline-flex; align-items:center; gap:8px; line-height:1;
}
.btn svg{width:18px;height:18px; fill:currentColor}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#031022}
.btn.ghost{background:transparent; border:1px solid var(--border); color:var(--ink)}
.btn:disabled{opacity:.5; pointer-events:none}
.icon-btn{background:transparent; border:1px solid var(--border); border-radius:10px; padding:8px; cursor:pointer}
.icon-btn svg{width:18px;height:18px}

.actions{display:flex; gap:10px; flex-wrap:wrap}
.vstack{display:flex; flex-direction:column; gap:10px}
.links{display:flex; gap:12px; flex-wrap:wrap}
.link{color:var(--accent); text-decoration:none}
.link:hover{text-decoration:underline}

/* Inputs */
.input-wrap{display:flex; gap:10px; align-items:center; width:100%; max-width:720px}
.input-wrap input{
  flex:1; padding:14px 16px; border-radius:12px; border:1px solid var(--border);
  background:var(--bg-soft); color:var(--ink); font-size:16px
}

/* MC Grid */
.mc-grid{display:grid; grid-template-columns:repeat(2,minmax(220px,1fr)); gap:12px; width:100%; max-width:720px}
.choice{
  background:var(--bg-soft); border:1px solid var(--border); border-radius:12px; padding:14px;
  cursor:pointer; transition:.15s transform ease, .2s border-color ease; text-align:center;
}
.choice:hover{transform:translateY(-1px)}
.choice.correct{border-color:var(--ok)}
.choice.wrong{border-color:var(--danger)}

/* Matching 5 */
.kv{display:grid; grid-template-columns:1fr 1fr; gap:12px; width:100%; max-width:780px}
.kv .col{background:var(--bg-soft); border:1px dashed var(--border); border-radius:12px; padding:12px; min-height:120px; overflow:auto}
.kv .item{background:#eef2ff; padding:10px 12px; border-radius:10px; margin:6px 0; cursor:pointer}
.theme-dark .kv .item{background:#20264a}
.kv .item.matched{opacity:.5}

/* Sentence Builder */
.pool{display:flex; gap:10px; flex-wrap:wrap; min-height:60px; background:var(--bg-soft); border:1px dashed var(--border); padding:12px; border-radius:12px; max-width:820px}
.tile{
  background:#eef2ff; padding:10px 12px; border-radius:10px; cursor:pointer; user-select:none;
  transition: transform .15s ease;
}
.theme-dark .tile{background:#20264a}
.tile:hover{transform:translateY(-1px)}
.sentence-target{
  min-height:56px; border:1px dashed var(--border); border-radius:12px; padding:12px; display:flex; gap:10px; flex-wrap:wrap; max-width:820px
}

/* Prompt & notes */
.prompt{font-size:22px; font-weight:800; margin-bottom:6px}
.note{color:var(--muted); margin-top:6px; text-align:center}

/* Audio button */
.audio-btn{background:transparent; border:1px solid var(--border); border-radius:10px; padding:10px; cursor:pointer}
.audio-btn svg{width:18px;height:18px; fill:currentColor}

/* Footer feedback */
.correct-hint{color:var(--ok)}
.wrong-hint{color:var(--danger)}

/* Footer */
.app-footer{ height:56px; }
.theme-toggle{display:flex; align-items:center; gap:8px}
.theme-toggle svg{width:18px;height:18px; fill:currentColor}
.switch{position:relative; display:inline-block; width:50px; height:26px}
.switch input{opacity:0; width:0; height:0}
.slider{
  position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#d1d7f0; transition:.2s; border-radius:999px; border:1px solid var(--border)
}
.slider:before{
  position:absolute; content:""; height:20px; width:20px; left:3px; top:50%; transform:translateY(-50%);
  background:#fff; transition:.2s; border-radius:50%; box-shadow: var(--shadow);
}
.switch input:checked + .slider{background:#1f254b}
.switch input:checked + .slider:before{transform:translate(24px,-50%)}

/* ========= MODAL ========= */
.modal{position:fixed; inset:0; display:grid; place-items:center; backdrop-filter: blur(4px); background:rgba(0,0,0,.2); z-index:30}
.theme-dark .modal{background:rgba(0,0,0,.35)}
.modal[hidden]{display:none}
.modal-box{
  width:min(940px, 92vw); max-height: 84vh; overflow:auto;
  background:var(--bg-soft); color:var(--ink); border:1px solid var(--border); border-radius:16px; box-shadow: var(--shadow); padding:16px;
}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding-bottom:8px; border-bottom:1px solid var(--border)}
.modal-grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:14px; margin-top:12px}
.modal-body{padding:12px 4px}
.os-help details{background:var(--bg); border:1px solid var(--border); border-radius:12px; padding:10px; margin:8px 0}
.os-help summary{cursor:pointer; font-weight:700}

/* ========= TOAST ========= */
.toast{
  position:fixed; bottom:16px; left:50%; transform:translateX(-50%);
  background:var(--bg-soft); color:var(--ink); border:1px solid var(--border); padding:10px 14px;
  border-radius:12px; display:none; z-index:40
}
.toast.show{display:block; animation: pop .2s ease}
@keyframes pop{from{transform:translateX(-50%) scale(.96); opacity:.6} to{transform:translateX(-50%) scale(1); opacity:1}}

/* ========= RESPONSIVE ========= */
@media (max-width: 980px){
  .shell{grid-template-columns: 0 1fr 0; padding:10px}
  .mc-grid{grid-template-columns:1fr}
  .modal-grid{grid-template-columns: 1fr}
  .header-status{min-width:auto; gap:10px}
  .header-status .bar{display:none}
  .q-header{min-height: 84px}
}

/* High-contrast focus */
:focus-visible{outline:2px solid var(--accent); outline-offset:2px}
