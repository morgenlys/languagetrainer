/* ================= THEME TOKENS (RGB exakt nach Vorgabe) ================= */
:root{
  --white: rgb(255,255,255);
  --lightgray: rgb(240,240,240);
  --darkgray: rgb(42,42,42);
  --darkdark: rgb(28,28,28);
  --black: rgb(0,0,0);

  /* Light */
  --bg: var(--lightgray);           /* Seitenhintergrund */
  --card: var(--white);             /* Kartenfläche */
  --card-text: var(--black);        /* Prompt */
  --chrome-text: var(--darkdark);   /* Header/Footer-Text */

  --bar-bg: var(--lightgray);       /* Streifen unten in Karte */

  /* Buttons (dunkelgrau) */
  --btn: var(--darkgray);
  --btn-hover: var(--black);
  --btn-text: var(--white);

  /* Auswahlflächen (MC/Match/Satzbau) */
  --choice-bg: var(--lightgray);
  --choice-text: var(--black);
  --choice-border: rgba(0,0,0,.08);
  --choice-hover: rgb(232,232,232);
  --choice-selected: var(--darkdark);  /* Rahmen bei Auswahl (helles Theme) */

  /* Feedbackfarben */
  --ok: #2e7d57;
  --ok-hover:#265f44;
  --bad:#b93a3a;
  --bad-hover:#8f2c2c;

  --border: rgba(0,0,0,.08);
  --radius: 18px;
  --shadow: 0 14px 32px rgba(0,0,0,.12);

  --center-max: 880px;
  --action-height: 84px;
  --btn-stable-width: 190px;

  --font-base: 12px;
  --font-family: Georgia, "Times New Roman", serif;
}
html[data-theme="dark"]{
  --bg: var(--darkdark);
  --card: var(--darkgray);
  --card-text: var(--white);
  --chrome-text: var(--lightgray);

  --bar-bg: var(--darkdark);

  --btn: var(--lightgray);
  --btn-hover: var(--white);
  --btn-text: var(--black);

  --choice-bg: var(--darkdark);
  --choice-text: var(--white);
  --choice-border: rgba(255,255,255,.25);
  --choice-hover: rgb(22,22,22);
  --choice-selected: var(--white); /* Rahmen im Darkmode */

  --border: rgba(255,255,255,.14);
  --shadow: 0 12px 28px rgba(0,0,0,.55);
}

/* ================= BASE ================= */
*{box-sizing:border-box}
html,body{height:100%; margin:0}
body{
  min-height:100dvh;
  background:var(--bg);
  color:var(--chrome-text);
  font-family: var(--font-family);
  font-size: var(--font-base);
  overflow:hidden; /* kein Scrollen */
}

/* ================= HEADER/FOOTER ================= */
.app-header,.app-footer{
  height:56px; display:flex; align-items:center; justify-content:center;
  background: transparent; border: none;
}
.frame{ width:min(var(--center-max), 92vw); display:flex; align-items:center; justify-content:space-between; }
.brand{display:flex; align-items:center; gap:18px}
.logo{font-weight:700; color:var(--chrome-text)}
.status{display:flex; gap:14px; color:var(--chrome-text)}
.status strong{color:var(--chrome-text)}
.header-actions{display:flex; gap:10px}

.icon-btn{
  background: rgba(0,0,0,0.05);
  color: var(--chrome-text);
  border:1px solid var(--border); border-radius:10px;
  width:38px; height:38px; display:flex; align-items:center; justify-content:center; cursor:pointer;
  transition: background-color .15s ease, transform .05s ease, border-color .2s ease;
}
html[data-theme="dark"] .icon-btn{ background: rgba(255,255,255,0.08); }
.icon-btn:hover{ background: rgba(0,0,0,0.1); }
html[data-theme="dark"] .icon-btn:hover{ background: rgba(255,255,255,0.12); }
.icon-btn svg{width:18px;height:18px; fill:currentColor}

/* ================= STAGE ================= */
.stage{
  position:fixed; top:56px; bottom:56px; left:0; right:0;
  display:grid; grid-template-columns: 1fr minmax(320px, var(--center-max)) 1fr; align-items:center;
  padding: 8px clamp(6px, 2vw, 24px);
}
.gutter{height:100%}

/* ================= CARD ================= */
.card.big{
  background:var(--card); border:1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); display:flex; flex-direction:column; height:100%;
}
.card-inner{
  position:relative; flex:1; padding: 22px clamp(18px, 3vw, 32px);
  display:flex; flex-direction:column; gap:16px; justify-content:flex-start; align-items:stretch; overflow:hidden;
}

/* Prompt */
.prompt{
  color: var(--card-text);
  font-weight:700;
  text-align:center;
  line-height:1.25;
  /* Größe setzen wir dynamisch via JS (36/24/18) */
}

/* Emoji mittig */
.emoji-hint{font-size: 42px; text-align:center; line-height:1;}

/* ================= BUTTONS ================= */
.btn{
  background:var(--btn); color:var(--btn-text); border:none; padding:10px 14px;
  border-radius:12px; cursor:pointer; font-weight:700; box-shadow: var(--shadow);
  display:inline-flex; align-items:center; justify-content:center; gap:8px; transition: background-color .15s ease;
}
.btn:hover{ background:var(--btn-hover) }
.btn.stable{ width:var(--btn-stable-width) }
.btn[disabled]{ opacity:.6; cursor:not-allowed }
.btn.ok{ background:var(--ok) } .btn.ok:hover{ background:var(--ok-hover) }
.btn.bad{ background:var(--bad) } .btn.bad:hover{ background:var(--bad-hover) }

.btn.ghost{ background:transparent; color:var(--chrome-text); border:1px solid var(--border) }
.btn.ghost.danger{ color:var(--bad); border-color:var(--bad) }

/* ================= ACTION BAR ================= */
.action-bar{
  height:var(--action-height); border-top:1px solid var(--border);
  background:var(--bar-bg); display:flex; align-items:center; justify-content:space-between;
  padding: 10px 16px; gap:10px; border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius);
}
.action-bar.ok{ background: color-mix(in oklab, var(--bar-bg) 88%, var(--ok) 12%); }
.action-bar.bad{ background: color-mix(in oklab, var(--bar-bg) 88%, var(--bad) 12%); }
.message{font-size:var(--font-base)}

/* ================= INPUT ================= */
.input-wrap{display:flex; gap:10px; align-items:center; justify-content:center}
.input-wrap input{
  width:min(520px, 100%);
  padding:12px 14px; border-radius:12px; border:1px solid var(--border);
  background:var(--white); color:var(--black); font-family: var(--font-family); font-size:var(--font-base);
}
html[data-theme="dark"] .input-wrap input{
  background:var(--darkdark); color:var(--white); border-color: var(--choice-border);
}

/* ================= MULTIPLE CHOICE ================= */
.mc-wrap{display:flex; flex-direction:column; align-items:center; gap:12px}
.mc-grid{
  display:grid; grid-template-columns:repeat(2,1fr); gap:12px;
  width: min(560px, 100%); margin-top:8px;
}
.choice{
  background:var(--choice-bg); border:1px solid var(--choice-border); border-radius:12px; padding:14px 16px;
  cursor:pointer; color:var(--choice-text); transition: background-color .15s ease, border-color .2s ease;
  text-align:center;
}
.choice:hover{ background:var(--choice-hover) }
.choice.selected{ outline:2px solid var(--choice-selected); }

/* ================= MATCHING ================= */
.kv{
  display:grid; grid-template-columns:1fr 1fr; gap:12px;
  width:min(720px,100%); margin:0 auto; flex:1; align-items:start;
}
.kv .col{
  background: var(--white);
  border:1px solid var(--border);
  border-radius:12px; padding:12px; overflow:auto; min-height:220px;
}
html[data-theme="dark"] .kv .col{
  background: var(--darkgray);
  border-color: var(--choice-border);
}
.kv .item{
  background:var(--choice-bg); color:var(--choice-text);
  padding:10px 12px; border-radius:10px; margin:6px 0; cursor:pointer;
  border:1px solid var(--choice-border);
  transition: background-color .15s ease, border-color .2s ease;
}
.kv .item:hover{ background:var(--choice-hover) }
.kv .item.matched{opacity:.55}
.kv .item.selected{outline:2px solid var(--choice-selected)}

/* ================= SPEECH / AUDIO BUTTON ================= */
.audio-btn{
  background:transparent; color: var(--chrome-text);
  border:1px solid var(--border); border-radius:10px; padding:8px; cursor:pointer;
  align-self:center; transition: background-color .15s ease;
}
.audio-btn:hover{ background: rgba(0,0,0,0.06) }
html[data-theme="dark"] .audio-btn:hover{ background: rgba(255,255,255,0.08) }
.audio-btn svg{width:18px;height:18px; fill:currentColor}

/* ================= SENTENCE BUILDER ================= */
.sentence-builder{display:flex; flex-direction:column; gap:14px; flex:1; align-items:center}
.sentence-target{
  min-height:64px; border:2px dashed var(--choice-border); border-radius:12px; padding:12px;
  display:flex; gap:8px; flex-wrap:wrap; background:transparent; width:min(720px,100%)
}
.pool{
  min-height:68px; background:var(--white); border:1px solid var(--border); padding:12px; border-radius:12px;
  display:flex; gap:8px; flex-wrap:wrap; align-content:flex-start; width:min(720px,100%)
}
html[data-theme="dark"] .pool{ background: var(--darkgray); border-color: var(--choice-border) }
.tile{
  background:var(--choice-bg); color:var(--choice-text);
  padding:10px 12px; border-radius:10px; cursor:pointer; user-select:none; border:1px solid var(--choice-border);
}
.fly-clone{
  position:fixed; z-index:999; pointer-events:none; border-radius:10px; padding:10px 12px;
  background:var(--choice-bg); color:var(--choice-text); border:1px solid var(--choice-border);
}
.ghost-slot{width:0;height:0; display:inline-block;}

/* ================= LINKS/TEXT ================= */
.link{color:var(--chrome-text); text-decoration:none; border-bottom:1px dotted var(--chrome-text)}
.link:hover{border-bottom-style:solid}

/* ================= MODAL ================= */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:20}
.modal[aria-hidden="false"]{display:flex}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35)}
.modal-card{
  position:relative; width:min(880px, 92vw); max-height:85vh; overflow:auto;
  background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow); color:var(--card-text)
}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border)}
.modal-body{padding:14px; display:flex; flex-direction:column; gap:18px; color:var(--chrome-text)}
.opt-section{display:flex; flex-direction:column; gap:10px}
.opt-row{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}

/* ================= THEME SWITCH (nach Vorgabe) ================= */
.theme-toggle{display:flex; align-items:center; gap:10px; color:var(--chrome-text)}
.toggle-label{font-weight:700}
.switch{position:relative; display:inline-block; width:48px; height:28px}
.switch input{opacity:0;width:0;height:0}
.slider{
  position:absolute; cursor:pointer; inset:0; background: var(--white);
  border:1px solid var(--border); border-radius:999px; transition:.2s
}
.slider:before{
  content:""; position:absolute; height:22px; width:22px; left:3px; top:3px;
  background: var(--darkgray); border-radius:50%; transition:.2s
}
.switch input:checked + .slider{
  background: var(--black); border-color: var(--black);
}
.switch input:checked + .slider:before{
  transform: translateX(20px);
  background: var(--lightgray);
}

/* ================= PLACEHOLDER ================= */
.placeholder{opacity:.8; text-align:center; margin:auto; color:var(--chrome-text)}

/* ================= RESPONSIVE ================= */
@media (max-width: 860px){
  .stage{grid-template-columns: 8px 1fr 8px}
  .mc-grid{grid-template-columns:1fr}
  .kv{grid-template-columns:1fr}
  .grid2{grid-template-columns:1fr}
}
